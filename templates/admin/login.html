{% load i18n static %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE|default:"en-us" }}" {% if LANGUAGE_BIDI %}dir="rtl"{% endif %}>
<head>
<title>{% block title %}{% trans "Log in" %} | {{ site_title|default:_('EdithCloths Admin') }}{% endblock %}</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'admin/css/base.css' %}?v=2">
<link rel="stylesheet" href="{% static 'admin/css/login.css' %}?v=2">
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/custom_admin.css' %}?v=2">
{% block extrastyle %}{% endblock %}
{% block extrahead %}{% endblock %}
<style>
/* Login Page Specific Styles - Override Django default - MAXIMUM PRIORITY */
* {
    box-sizing: border-box !important;
}

html, body, body.login {
    background: #1a1a1a !important;
    background-color: #1a1a1a !important;
    position: relative !important;
    min-height: 100vh !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
    color: #FFFFFF !important;
    margin: 0 !important;
    padding: 0 !important;
}

body.login::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(230, 230, 230, 0.15);
    z-index: -2;
    pointer-events: none;
}

body.login::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('https://myshp-frontend.vercel.app/assets/images/logo.jpg');
    background-position: center center;
    background-size: 600px auto;
    background-repeat: no-repeat;
    opacity: 0.15;
    z-index: -1;
    pointer-events: none;
}

body.login #header {
    background: #000000 !important;
    border-bottom: 1px solid #E6E6E6 !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
    padding: 1rem 2rem !important;
}

body.login #header h1,
body.login #header h1 a,
body.login #header h1 a:link,
body.login #header h1 a:visited {
    color: #FFFFFF !important;
    font-weight: 700 !important;
    letter-spacing: 0.2em !important;
    text-transform: uppercase !important;
    font-size: 1.5rem !important;
    text-decoration: none !important;
}

body.login #content,
#content,
div#content {
    background: transparent !important;
    padding: 3rem 1rem !important;
    color: #FFFFFF !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

body.login #content h1 {
    color: #FFFFFF !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
}

body.login #content-main,
#content-main,
div#content-main {
    max-width: 500px !important;
    margin: 2rem auto !important;
    background: rgba(255, 255, 255, 0.05) !important;
    background-color: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid #E6E6E6 !important;
    border-radius: 16px !important;
    padding: 2.5rem !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    backdrop-filter: blur(10px) !important;
    color: #FFFFFF !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

body.login #login-form {
    margin-top: 1.5rem !important;
}

body.login .form-row {
    margin-bottom: 1.5rem !important;
}

body.login .form-row label {
    color: #FFFFFF !important;
    font-weight: 600 !important;
    font-size: 0.9rem !important;
    text-transform: uppercase !important;
    letter-spacing: 0.1em !important;
    margin-bottom: 0.5rem !important;
    display: block !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
}

body.login .form-row input[type="text"],
body.login .form-row input[type="password"],
body.login .form-row input[type="email"] {
    width: 100% !important;
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid #E6E6E6 !important;
    color: #FFFFFF !important;
    border-radius: 16px !important;
    padding: 0.875rem 1rem !important;
    font-size: 1rem !important;
    transition: all 0.3s ease !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
}

body.login .form-row input[type="text"]:focus,
body.login .form-row input[type="password"]:focus,
body.login .form-row input[type="email"]:focus,
body.login input[type="text"]:focus,
body.login input[type="password"]:focus,
body.login input[type="email"]:focus {
    background: rgba(255, 255, 255, 0.08) !important;
    border-color: #FFD700 !important;
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1) !important;
}

body.login .submit-row {
    margin-top: 2rem !important;
    padding: 0 !important;
    text-align: center !important;
}

body.login .submit-row input[type="submit"] {
    width: 100% !important;
    background: #FFD700 !important;
    color: #000000 !important;
    border: none !important;
    border-radius: 16px !important;
    padding: 1rem 2rem !important;
    font-weight: 600 !important;
    font-size: 1rem !important;
    text-transform: uppercase !important;
    letter-spacing: 0.1em !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
}

body.login .submit-row input[type="submit"]:hover {
    background: #FFC700 !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

body.login #login-form p {
    color: #E6E6E6 !important;
    margin-top: 1rem !important;
    text-align: center !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
}

body.login #login-form a {
    color: #FFD700 !important;
    text-decoration: none !important;
    font-weight: 600 !important;
    transition: color 0.3s ease !important;
}

body.login #login-form a:hover {
    color: #FFFFFF !important;
}

body.login .errorlist {
    list-style: none !important;
    padding: 0 !important;
    margin: 1rem 0 !important;
}

body.login .errorlist li {
    background: rgba(229, 57, 53, 0.2) !important;
    border: 1px solid #E53935 !important;
    color: #FF5252 !important;
    border-radius: 8px !important;
    padding: 0.75rem 1rem !important;
    margin-bottom: 0.5rem !important;
    font-size: 0.9rem !important;
}

body.login .breadcrumbs {
    background: transparent !important;
    color: #FFFFFF !important;
    border-bottom: none !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
}

body.login .breadcrumbs a {
    color: #FFD700 !important;
}

body.login #changelist-filter {
    display: none !important;
}

/* Hide theme toggle elements on login page - MAXIMUM SPECIFICITY */
body.login .theme-toggle-container,
body.login #theme-toggle-container,
body.login #theme-toggle-btn,
body.login .nav-global,
body.login [id*="theme"],
.theme-toggle-container,
#theme-toggle-container,
#theme-toggle-btn,
.nav-global,
[id*="theme"],
div.theme-toggle-container,
div#theme-toggle-container {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    height: 0 !important;
    width: 0 !important;
    overflow: hidden !important;
    position: absolute !important;
    left: -9999px !important;
}

/* Ensure login form is visible - MAXIMUM SPECIFICITY */
body.login #login-form,
#login-form,
form#login-form,
form {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    margin-top: 1.5rem !important;
    width: 100% !important;
}

/* Ensure form elements are visible */
body.login .form-row,
.form-row,
div.form-row {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    margin-bottom: 1.5rem !important;
    width: 100% !important;
}

body.login .form-row label,
.form-row label,
label {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    color: #FFFFFF !important;
    font-weight: 600 !important;
    margin-bottom: 0.5rem !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
}

body.login input[type="text"],
body.login input[type="password"],
input[type="text"],
input[type="password"],
input[name="username"],
input[name="password"],
input#id_username,
input#id_password {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    width: 100% !important;
    box-sizing: border-box !important;
    background: rgba(255, 255, 255, 0.05) !important;
    background-color: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid #E6E6E6 !important;
    color: #FFFFFF !important;
    padding: 0.875rem 1rem !important;
    border-radius: 16px !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
    font-size: 1rem !important;
    margin-bottom: 1.5rem !important;
}

body.login .submit-row,
.submit-row {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    margin-top: 2rem !important;
    text-align: center !important;
    width: 100% !important;
}

body.login .submit-row input[type="submit"],
.submit-row input[type="submit"],
input[type="submit"] {
    display: inline-block !important;
    visibility: visible !important;
    opacity: 1 !important;
    width: 100% !important;
    background: #FFD700 !important;
    background-color: #FFD700 !important;
    color: #000000 !important;
    border: none !important;
    border-radius: 16px !important;
    padding: 1rem 2rem !important;
    font-weight: 600 !important;
    font-size: 1rem !important;
    cursor: pointer !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
}

body.login label,
label {
    color: #FFFFFF !important;
    font-weight: 600 !important;
    display: block !important;
    margin-bottom: 0.5rem !important;
    font-family: 'Poppins', 'Inter', sans-serif !important;
}

/* Responsive */
@media (max-width: 768px) {
    body.login #content-main {
        padding: 2rem 1.5rem !important;
        margin: 1rem !important;
    }
    
    body.login #header h1 {
        font-size: 1.2rem !important;
    }
}
</style>
</head>
<body class="login">
    <!-- Container -->
    <div id="container">
        <!-- Header -->
        <div id="header">
            <div id="branding">
                {% block branding %}
                <h1 id="site-name"><a href="{% url 'admin:index' %}">EdithCloths Admin</a></h1>
                {% endblock %}
            </div>
        </div>
        <!-- END Header -->
        <!-- Content -->
        <div id="content" class="colM">
            {% block content %}

            <div id="content-main" style="display: block !important; visibility: visible !important; opacity: 1 !important; max-width: 500px !important; margin: 2rem auto !important; background: rgba(255, 255, 255, 0.05) !important; border: 1px solid #E6E6E6 !important; border-radius: 16px !important; padding: 2.5rem !important; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important; color: #FFFFFF !important;">
                <form action="{% url 'admin:login' %}" method="post" id="login-form" style="display: block !important; visibility: visible !important; opacity: 1 !important; width: 100% !important; position: relative !important; z-index: 1 !important;">{% csrf_token %}
                    {% if form and form.username.errors %}
                    <ul class="errorlist" style="list-style: none !important; padding: 0 !important; margin: 0 0 0.5rem 0 !important; display: block !important; visibility: visible !important;">
                        {% for error in form.username.errors %}
                        <li style="color: #FF5252 !important; font-size: 0.9rem !important; display: block !important; visibility: visible !important;">{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                    <div class="form-row" style="display: block !important; visibility: visible !important; opacity: 1 !important; width: 100% !important; margin-bottom: 1.5rem !important; position: relative !important; z-index: 1 !important;">
                        <label for="id_username" style="display: block !important; visibility: visible !important; opacity: 1 !important; color: #FFFFFF !important; font-weight: 600 !important; font-size: 0.9rem !important; text-transform: uppercase !important; letter-spacing: 0.1em !important; margin-bottom: 0.5rem !important; font-family: 'Poppins', 'Inter', sans-serif !important;">{% trans 'Username:' %}</label>
                        <input type="text" name="username" id="id_username" required autofocus style="display: block !important; visibility: visible !important; opacity: 1 !important; width: 100% !important; box-sizing: border-box !important; background: rgba(255, 255, 255, 0.05) !important; background-color: rgba(255, 255, 255, 0.05) !important; border: 1px solid #E6E6E6 !important; color: #FFFFFF !important; padding: 0.875rem 1rem !important; border-radius: 16px !important; font-size: 1rem !important; font-family: 'Poppins', 'Inter', sans-serif !important; position: relative !important; z-index: 1 !important;">
                    </div>
                    {% if form and form.password.errors %}
                    <ul class="errorlist" style="list-style: none !important; padding: 0 !important; margin: 0 0 0.5rem 0 !important; display: block !important; visibility: visible !important;">
                        {% for error in form.password.errors %}
                        <li style="color: #FF5252 !important; font-size: 0.9rem !important; display: block !important; visibility: visible !important;">{{ error }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                    <div class="form-row" style="display: block !important; visibility: visible !important; opacity: 1 !important; width: 100% !important; margin-bottom: 1.5rem !important; position: relative !important; z-index: 1 !important;">
                        <label for="id_password" style="display: block !important; visibility: visible !important; opacity: 1 !important; color: #FFFFFF !important; font-weight: 600 !important; font-size: 0.9rem !important; text-transform: uppercase !important; letter-spacing: 0.1em !important; margin-bottom: 0.5rem !important; font-family: 'Poppins', 'Inter', sans-serif !important;">{% trans 'Password:' %}</label>
                        <input type="password" name="password" id="id_password" required style="display: block !important; visibility: visible !important; opacity: 1 !important; width: 100% !important; box-sizing: border-box !important; background: rgba(255, 255, 255, 0.05) !important; background-color: rgba(255, 255, 255, 0.05) !important; border: 1px solid #E6E6E6 !important; color: #FFFFFF !important; padding: 0.875rem 1rem !important; border-radius: 16px !important; font-size: 1rem !important; font-family: 'Poppins', 'Inter', sans-serif !important; position: relative !important; z-index: 1 !important;">
                        <input type="hidden" name="next" value="{{ next }}">
                    </div>
                    {% url 'admin_password_reset' as password_reset_url %}
                    {% if password_reset_url %}
                    <div class="password-reset-link" style="text-align: center !important; margin-top: 1rem !important; display: block !important; visibility: visible !important;">
                        <a href="{{ password_reset_url }}" style="color: #FFD700 !important; text-decoration: none !important;">{% trans 'Forgotten your password or username?' %}</a>
                    </div>
                    {% endif %}
                    <div class="submit-row" style="display: block !important; visibility: visible !important; opacity: 1 !important; margin-top: 2rem !important; text-align: center !important; width: 100% !important;">
                        <input type="submit" value="{% trans 'Log in' %}" style="display: inline-block !important; visibility: visible !important; opacity: 1 !important; width: 100% !important; background: #FFD700 !important; background-color: #FFD700 !important; color: #000000 !important; border: none !important; border-radius: 16px !important; padding: 1rem 2rem !important; font-weight: 600 !important; font-size: 1rem !important; text-transform: uppercase !important; letter-spacing: 0.1em !important; cursor: pointer !important; font-family: 'Poppins', 'Inter', sans-serif !important; transition: all 0.3s ease !important;">
                    </div>
                </form>
            </div>
            {% endblock %}
        </div>
        <!-- END Content -->
        <div id="footer"></div>
    </div>
<script>
// Force all form elements to be visible - Run continuously to handle intermittent issues
(function() {
    function forceVisibility() {
        // Force content-main visibility
        var contentMain = document.getElementById('content-main');
        if (contentMain) {
            contentMain.style.display = 'block';
            contentMain.style.visibility = 'visible';
            contentMain.style.opacity = '1';
            contentMain.style.maxWidth = '500px';
            contentMain.style.margin = '2rem auto';
            contentMain.style.background = 'rgba(255, 255, 255, 0.05)';
            contentMain.style.border = '1px solid #E6E6E6';
            contentMain.style.borderRadius = '16px';
            contentMain.style.padding = '2.5rem';
            contentMain.style.color = '#FFFFFF';
        }
        
        // Force form visibility
        var loginForm = document.getElementById('login-form');
        if (loginForm) {
            loginForm.style.display = 'block';
            loginForm.style.visibility = 'visible';
            loginForm.style.opacity = '1';
            loginForm.style.width = '100%';
        } else {
            // If form doesn't exist, create it
            if (contentMain && !loginForm) {
                var form = document.createElement('form');
                form.id = 'login-form';
                form.action = '/edith-admin-login/login/';
                form.method = 'post';
                form.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important; width: 100% !important;';
                
                // Add CSRF token
                var csrfInput = document.createElement('input');
                csrfInput.type = 'hidden';
                csrfInput.name = 'csrfmiddlewaretoken';
                csrfInput.value = document.querySelector('[name=csrfmiddlewaretoken]')?.value || '';
                form.appendChild(csrfInput);
                
                // Add username field
                var usernameRow = document.createElement('div');
                usernameRow.className = 'form-row';
                usernameRow.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important; width: 100% !important; margin-bottom: 1.5rem !important;';
                usernameRow.innerHTML = '<label for="id_username" style="display: block !important; color: #FFFFFF !important; font-weight: 600 !important; margin-bottom: 0.5rem !important;">Username:</label><input type="text" name="username" id="id_username" required autofocus style="display: block !important; width: 100% !important; background: rgba(255, 255, 255, 0.05) !important; border: 1px solid #E6E6E6 !important; color: #FFFFFF !important; padding: 0.875rem 1rem !important; border-radius: 16px !important;">';
                form.appendChild(usernameRow);
                
                // Add password field
                var passwordRow = document.createElement('div');
                passwordRow.className = 'form-row';
                passwordRow.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important; width: 100% !important; margin-bottom: 1.5rem !important;';
                passwordRow.innerHTML = '<label for="id_password" style="display: block !important; color: #FFFFFF !important; font-weight: 600 !important; margin-bottom: 0.5rem !important;">Password:</label><input type="password" name="password" id="id_password" required style="display: block !important; width: 100% !important; background: rgba(255, 255, 255, 0.05) !important; border: 1px solid #E6E6E6 !important; color: #FFFFFF !important; padding: 0.875rem 1rem !important; border-radius: 16px !important;">';
                form.appendChild(passwordRow);
                
                // Add submit button
                var submitRow = document.createElement('div');
                submitRow.className = 'submit-row';
                submitRow.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important; margin-top: 2rem !important; text-align: center !important; width: 100% !important;';
                submitRow.innerHTML = '<input type="submit" value="Log in" style="display: inline-block !important; width: 100% !important; background: #FFD700 !important; color: #000000 !important; border: none !important; border-radius: 16px !important; padding: 1rem 2rem !important; font-weight: 600 !important; cursor: pointer !important;">';
                form.appendChild(submitRow);
                
                contentMain.appendChild(form);
            }
        }
        
        // Force all form rows visibility
        var formRows = document.querySelectorAll('.form-row');
        formRows.forEach(function(row) {
            row.style.display = 'block';
            row.style.visibility = 'visible';
            row.style.opacity = '1';
            row.style.width = '100%';
        });
        
        // Force all labels visibility
        var labels = document.querySelectorAll('label');
        labels.forEach(function(label) {
            label.style.display = 'block';
            label.style.visibility = 'visible';
            label.style.opacity = '1';
            label.style.color = '#FFFFFF';
        });
        
        // Force all inputs visibility
        var inputs = document.querySelectorAll('input[type="text"], input[type="password"]');
        inputs.forEach(function(input) {
            input.style.display = 'block';
            input.style.visibility = 'visible';
            input.style.opacity = '1';
            input.style.width = '100%';
            input.style.background = 'rgba(255, 255, 255, 0.05)';
            input.style.border = '1px solid #E6E6E6';
            input.style.color = '#FFFFFF';
            input.style.padding = '0.875rem 1rem';
            input.style.borderRadius = '16px';
        });
        
        // Force submit button visibility
        var submitBtn = document.querySelector('input[type="submit"]');
        if (submitBtn) {
            submitBtn.style.display = 'inline-block';
            submitBtn.style.visibility = 'visible';
            submitBtn.style.opacity = '1';
            submitBtn.style.width = '100%';
            submitBtn.style.background = '#FFD700';
            submitBtn.style.color = '#000000';
        }
        
        // Force submit-row visibility
        var submitRow = document.querySelector('.submit-row');
        if (submitRow) {
            submitRow.style.display = 'block';
            submitRow.style.visibility = 'visible';
            submitRow.style.opacity = '1';
        }
    }
    
    // Run immediately
    forceVisibility();
    
    // Run on DOM ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', forceVisibility);
    } else {
        forceVisibility();
    }
    
    // Run multiple times to catch any delays and handle intermittent issues
    setTimeout(forceVisibility, 50);
    setTimeout(forceVisibility, 100);
    setTimeout(forceVisibility, 250);
    setTimeout(forceVisibility, 500);
    setTimeout(forceVisibility, 1000);
    setTimeout(forceVisibility, 2000);
    
    // Use MutationObserver to watch for DOM changes
    if (window.MutationObserver) {
        var observer = new MutationObserver(function(mutations) {
            forceVisibility();
        });
        observer.observe(document.body, {
            childList: true,
            subtree: true,
            attributes: true
        });
    }
    
    // Also run on window load
    window.addEventListener('load', forceVisibility);
})();
</script>
</body>
</html>
