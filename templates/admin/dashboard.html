{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}Store Dashboard | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block extrastyle %}
{{ block.super }}
<style>
    /* Additional dashboard-specific styles */
    .dashboard-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    
    @media (max-width: 768px) {
        .dashboard-stats {
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
    }
    
    @media (max-width: 480px) {
        .dashboard-stats {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<h1>Store Dashboard</h1>

<div class="dashboard-stats">
    <div class="stat-card">
        <h3>{{ total_orders }}</h3>
        <p>Total Orders</p>
    </div>
    <div class="stat-card">
        <h3>{{ completed_orders }}</h3>
        <p>Completed Orders</p>
    </div>
    <div class="stat-card">
        <h3>{{ pending_orders }}</h3>
        <p>Pending Orders</p>
    </div>
    <div class="stat-card">
        <h3>{{ cancelled_orders }}</h3>
        <p>Cancelled Orders</p>
    </div>
    <div class="stat-card">
        <h3>{{ total_users }}</h3>
        <p>Total Users</p>
    </div>
    <div class="stat-card">
        <h3>₹{{ total_revenue|floatformat:2 }}</h3>
        <p>Total Revenue</p>
    </div>
</div>

<div class="dashboard-section">
    <h2>Recent Orders</h2>
    <table>
        <thead>
            <tr>
                <th>Order Number</th>
                <th>User</th>
                <th>Status</th>
                <th>Amount</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            {% for order in recent_orders %}
            <tr>
                <td>{{ order.order_number }}</td>
                <td>{{ order.user.username }}</td>
                <td>{{ order.get_status_display }}</td>
                <td>₹{{ order.total_amount }}</td>
                <td>{{ order.created_at|date:"M d, Y" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5">No orders yet</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="dashboard-section">
    <h2>Order Status Breakdown</h2>
    <table>
        <thead>
            <tr>
                <th>Status</th>
                <th>Count</th>
            </tr>
        </thead>
        <tbody>
            {% for status in status_breakdown %}
            <tr>
                <td>{{ status.status }}</td>
                <td>{{ status.count }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

